function irGetKeywords(){var irVal="";var c=new RegExp(/[\?|\&](q|p|query|encquery|terms|rdata|szukaj|k|qt|qs|wd|text)=([^&]*)/);var a=c.exec(document.referrer);if(a){irVal=a[2]}return irVal}function irIsSeo(){var nsDomains=/\b(google|yahoo|msn|bing|aol|lycos|ask|altavista|netscape|cnn|looksmart|about|mamma|alltheweb|gigablast|voila|virgilio|live|baidu|alice|yandex|najdi|club-internet|mama|seznam|search|szukaj|netsprint|google.interia|szukacz|yam|pchome)\b/;var referrerDomain=document.referrer.replace(/^https?:\/\/([^\/]+)\/.*$/,"$1");return nsDomains.test(referrerDomain)}function irLog(a){var irREDb=new RegExp("irdebug=([^&]+)");if(irREDb.test(window.location.search)){typeof console!="undefined"&&console&&console.log&&console.log(a)}}function IrMSTEvent(){this.irMsConfig=null;this.irMsUndefConfig=null;this.irMsDirectConfig=null;this.cid=null;this.tag="img";this.trDomain=null}IrMSTEvent.prototype={setCampaignId:function(cid){this.cid=cid},setTrDomain:function(trDomain){this.trDomain=trDomain},setTag:function(tag){this.tag=tag},setMsConfig:function(msConfig){this.irMsConfig=msConfig},setMsUndefConfig:function(msUndefConfig){this.irMsUndefConfig=msUndefConfig},setMsDirectConfig:function(msDirectConfig){this.irMsDirectConfig=msDirectConfig},fire:function(){var foundIrMs,msCfg,mp,referrerDomain=document.referrer.replace(/^https?:\/\/([^\/]+)\/.*$/,"$1");function regexMatch(pattern,value){if(!pattern){return false}try{return new RegExp("^"+pattern+"$","i").test(value)}catch(e){irLog("Bad expr: "+pattern+" -- "+e);return false}}function queryStringParamMatch(namePattern,valuePattern){if(!namePattern){return false}var irqval=IRF.util.getQueryParam(namePattern);irLog(namePattern+"="+irqval);if(valuePattern){return regexMatch(valuePattern,irqval!=null?irqval:"")}return irqval||irqval===""}function referrerDomainMatch(domainPattern){return regexMatch(domainPattern,referrerDomain)}function pageUrlMatch(urlRegex){return regexMatch(urlRegex,window.location.href)}function currentUrlMatch(map){return queryStringParamMatch(map.SRCP,map.SRCV)||pageUrlMatch(map.SRCU)}function referringUrlMatch(map){return referrerDomainMatch(map.SRCR)||regexMatch(map.SRCRU,document.referrer)}for(var j=0;j<this.irMsConfig.length;j++){msCfg=this.irMsConfig[j];var msMatch=msCfg.OP=="AND"?currentUrlMatch(msCfg)&&referringUrlMatch(msCfg):currentUrlMatch(msCfg)||referringUrlMatch(msCfg);if(msMatch){foundIrMs=msCfg;break}}function documentHostPort(){return window.location.port?window.location.hostname+":"+window.location.port:window.location.hostname}function extractSrcParams(params){var src="";var ps=params.split(",");for(var i=0;i<ps.length;i++){var v=IRF.util.getQueryParam(ps[i]);if(v){src+="&"+ps[i]+"="+encodeURIComponent(v)}}return src}if(!foundIrMs&&this.irMsUndefConfig){if(referrerDomain&&referrerDomain!=documentHostPort()){foundIrMs=this.irMsUndefConfig[0]}}if(!foundIrMs&&this.irMsDirectConfig){if(!referrerDomain){if(!IRF.util.getCookie("IRMS_undef"+this.cid)){foundIrMs=this.irMsDirectConfig[0];IRF.util.setCookie("IRMS_undef"+this.cid,"1")}}}if(foundIrMs){var tagSrc=foundIrMs.MSID+"/"+foundIrMs.ADID+"/"+this.cid+"?srcref="+encodeURIComponent(document.referrer);tagSrc+=extractSrcParams("subId1,subId2,subId3,sharedid,trafcat,trafsrc,clkcost,actioncost,iratid,irappid,matchtype,adnetwork,adposition,adplacement,adcampaign,adgroup,adtype,adname,adid,prodcat,prodsubcat,prodsku,param1,param2,param3,param4,subacctid,subacctname,subclkid");if(irIsSeo()){tagSrc+="&searchtxt="+encodeURIComponent(irGetKeywords())}tagSrc+="&landurl="+encodeURIComponent(window.location.href);var node=document.createElement(this.tag),nodeSrc,dir="/pc/";if(this.tag=="iframe"){node.frameborder=0;dir="/ifc/"}nodeSrc="//"+this.trDomain+dir+tagSrc;node.src=nodeSrc;node.width=node.height=1;document.body.appendChild(node);irLog(nodeSrc)}else{irLog("No rules matches")}}};var irMSTEvent_2550=new IrMSTEvent();irMSTEvent_2550.setCampaignId("2550");irMSTEvent_2550.setTrDomain("TeamSnap.evyy.net");irMSTEvent_2550.setMsConfig([{MSID:95434,ADID:139121,SRCP:"irsrc",SRCV:"(?:(?:test))"}]);irMSTEvent_2550.fire();